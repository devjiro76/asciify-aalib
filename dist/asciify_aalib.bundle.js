!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=44)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapRange=function(t,e,r,n,o){return n+(o-n)/(r-e)*(t-e)},e.getRGB=function(t,e,r){var n=r*(t.width<<2)+(e<<2);return{r:t.data[n],g:t.data[n+1],b:t.data[n+2]}},e.trunc=function(t){return t>255?255:t<0?0:t},e.range=function(t,e){return Array.from(new Array(e-t+1).keys()).map(function(e){return e+t})},e.clampByte=function(t){if(t>255)return 255;if(t<0)return 0;return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(r(8));var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.width,n=e.height,o=e.colorProcessor,i=e.data,u=void 0===i?[]:i,s=e.meta,a=void 0===s?{}:s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=r,this.height=n,this.data=u,this.meta=a,this.colorProcessor=o}return n(t,[{key:"getAt",value:function(t,e){return this.data[t+this.width*e]}},{key:"process",value:function(t){var e=this;return this.data.forEach(function(r){t(r,e.colorProcessor)}),this}},{key:"toImageData",value:function(){for(var t=[],e=void 0,r=0;r<this.data.length;r++)e=this.data[r],t[t.length]=e.r,t[t.length]=e.g,t[t.length]=e.b,t[t.length]=255;return new ImageData(new Uint8ClampedArray(t),this.width,this.height)}}],[{key:"fromImageData",value:function(e){for(var r=new Uint32Array(e.data.buffer),n=r.length,i=new Array(n),u=n,s=void 0;u--;)s=r[u],i[u]={r:255&s,g:s>>8&255,b:s>>16&255};return new t({data:i,width:e.width,height:e.height,colorProcessor:o.default})}},{key:"fromHTMLImageElement",value:function(e){var r=document.createElement("canvas"),n=r.getContext("2d"),o=e.naturalWidth,i=e.naturalHeight;return r.width=o,r.height=i,n.drawImage(e,0,0),t.fromImageData(n.getImageData(0,0,o,i))}}]),t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIMPLE_CHARSET=e.ASCII_CHARSET=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(r(16));var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=Object.assign({},{charset:s,fontFamily:"monospace"},e),this.fontmap=t.buildFont(this.options.charset,{fontFamily:this.options.fontFamily}),this.matchChar=function(t){return t._cache=[],function(e){return t._cache[e]||(t._cache[e]=t(e))}}(this.matchChar.bind(this))}return n(t,[{key:"render",value:function(t){return this.processImage(t)}},{key:"processImage",value:function(t){for(var e=t.data.length,r=void 0;e--;)(r=t.data[e]).char=this.matchChar(r.mono);return t}},{key:"matchChar",value:function(t){for(var e={brightness:-1},r=0;r<this.fontmap.length;r++){var n=this.fontmap[r];if(!(Math.abs(t-n.brightness)<=Math.abs(t-e.brightness)))return e.char;e=n}return e.char}}],[{key:"buildFont",value:function(t,e){return(0,i.default)(t,e)}}]),t}();e.default=u;var s=e.ASCII_CHARSET=(0,o.range)(32,126).map(function(t){return String.fromCharCode(t)});e.SIMPLE_CHARSET=[".",":","*","I","$","V","F","N","M"]},function(t,e,r){"use strict";function n(t,e,r){return t.process(function(t,n){n.mul(t,e).add(t,r).clamp(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return function(r){return n(r,t,e)}},e.linearTransformation=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(12),i=r(37),u=r(10),s=r(9),a=function(t){function e(e,r,n){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u.empty;break;case 1:if(!e){this.destination=u.empty;break}if("object"==typeof e){if(f(e)){var o=e[s.rxSubscriber]();this.syncErrorThrowable=o.syncErrorThrowable,this.destination=o,o.add(this)}else this.syncErrorThrowable=!0,this.destination=new c(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new c(this,e,r,n)}}return n(e,t),e.prototype[s.rxSubscriber]=function(){return this},e.create=function(t,r,n){var o=new e(t,r,n);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(i.Subscription);e.Subscriber=a;var c=function(t){function e(e,r,n,i){var s;t.call(this),this._parentSubscriber=e;var a=this;o.isFunction(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==u.empty&&(a=Object.create(r),o.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=i}return n(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,r){try{e.call(this._context,r)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(a);function f(t){return t instanceof a||"syncErrorThrowable"in t&&t[s.rxSubscriber]}},function(t,e,r){"use strict";(function(t){var r="undefined"!=typeof window&&window,n="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o=r||void 0!==t&&t||n;e.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,r(39))},function(t,e,r){"use strict";var n=r(5),o=r(38),i=r(32),u=r(31),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=o.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}},t.prototype.forEach=function(t,e){var r=this;if(e||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?e=n.root.Rx.config.Promise:n.root.Promise&&(e=n.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var o;o=r.subscribe(function(e){if(o)try{t(e)}catch(t){n(t),o.unsubscribe()}else t(e)},n,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[i.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:u.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;if(t||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?t=n.root.Rx.config.Promise:n.root.Promise&&(t=n.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},t.create=function(e){return new t(e)},t}();e.Observable=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(6);r(29),r(26);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"read",value:function(){var t=this;return o.Observable.create(function(e){return t.onRead(e),t.onDispose.bind(t)})}},{key:"onRead",value:function(){}},{key:"onDispose",value:function(){}}]),t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default={mul:function(t,e){return t.r=~~(t.r*e),t.g=~~(t.g*e),t.b=~~(t.b*e),this},add:function(t,e){return t.r+=e,t.g+=e,t.b+=e,this},addc:function(t,e){var r=e.r,n=e.g,o=e.b;return t.r+=r,t.g+=n,t.b+=o,this},div:function(t,e){return this.mul(t,1/e)},inverse:function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this},getGrayscale:function(t){return~~((t.r+t.g+t.b)/3)},desaturate:function(t){return t.r=t.g=t.b=this.getGrayscale(t),this},clamp:function(t){return t.r=(0,n.clampByte)(t.r),t.g=(0,n.clampByte)(t.g),t.b=(0,n.clampByte)(t.b),this}}},function(t,e,r){"use strict";var n=r(5).root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,r){"use strict";e.errorObject={e:{}}},function(t,e,r){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.default={mul:function(t,e){return t.mono=~~(t.mono*e),this},add:function(t,e){return t.mono+=e,this},div:function(t,e){this.mul(t,1/e)},inverse:function(t){return t.mono=255-t.mono,this},desaturate:function(t){return t.r=t.g=t.b=t.mono,t},clamp:function(t){return t.mono=(0,n.clampByte)(t.mono),this}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){return a(e,t)}},e.aa=a;var n=s(r(1)),o=s(r(13)),i=s(r(8)),u=r(0);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var r=e.width,i=e.height,s=e.colored,a=void 0!==s&&s,f=t.width/r,l=t.height/i,h=255,p=0,d=new Array(r*i),b=0,y=0;y<i;y++)for(var v=0;v<r;v++){var m=c(t,~~(v*f),~~(y*l),f,l);m.mono>p&&(p=m.mono),m.mono<h&&(h=m.mono),d[b++]=m}var g=new n.default({width:r,height:i,data:d,colorProcessor:o.default,meta:{colored:a}});return function(t,e,r){t.process(function(t){t.mono=~~(0,u.mapRange)(t.mono,e,r,0,255)})}(g,h,p),g}function c(t,e,r,n,o){for(var u={r:0,g:0,b:0},s=0,a=0;a<o;a++)for(var c=0;c<n;c++)i.default.addc(u,t.getAt(e+c,r+a)),s++;return i.default.div(u,s),{r:u.r,g:u.g,b:u.b,mono:i.default.getGrayscale(u)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasRenderer=e.SIMPLE_CHARSET=e.ASCII_CHARSET=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(2);Object.defineProperty(e,"ASCII_CHARSET",{enumerable:!0,get:function(){return o.ASCII_CHARSET}}),Object.defineProperty(e,"SIMPLE_CHARSET",{enumerable:!0,get:function(){return o.SIMPLE_CHARSET}}),e.default=function(t){var e=new u(t);return function(t){return e.render(t)}};var i=function(t){return t&&t.__esModule?t:{default:t}}(o);var u=e.CanvasRenderer=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Object.assign({},{fontSize:7,lineHeight:7,charWidth:4.2,width:400,height:300,background:"#fff",color:"#000"},t)));return r.el=r.options.el||document.createElement("canvas"),r.el.width=r.options.width,r.el.height=r.options.height,r.el.style.backgroundColor=r.options.background,r.ctx=r.el.getContext("2d"),r.ctx.textBaseline="top",r.ctx.textAlign="start",r.ctx.font=r.options.fontSize+"px "+r.options.fontFamily,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),n(e,[{key:"render",value:function(t){return function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t),this.clearCanvas(),(t.meta.colored?function(t,e){return function(r){for(var n=r.data,o=r.width,i=e.charWidth,u=e.lineHeight,s=void 0,a=void 0,c=void 0,f=n.length;f--;)s=f%o,a=~~(f/o),c=n[f],t.fillStyle="rgb("+c.r+", "+c.g+", "+c.b+")",t.fillText(n[f].char,s*i,a*u)}}(this.ctx,this.options):function(t,e){return function(r){var n=r.data,o=r.width,i=e.lineHeight,u=void 0,s="";t.fillStyle=e.color;for(var a=0,c=n.length;a<c;a+=o){u=~~(a/o),s="";for(var f=a;f<a+o;f++)s+=n[f].char;t.fillText(s,0,u*i)}}}(this.ctx,this.options))(t),this.el}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.el.width,this.el.height)}}]),e}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var r=new Array(t.length),i=255,u=0,s=0;s<t.length;s++){var a=t[s],c=o(a,e);c<i&&(i=c),c>u&&(u=c),r[s]={char:a,brightness:c}}return r.map(function(t){var e=t.char,r=t.brightness;return{char:e,brightness:~~(0,n.mapRange)(r,i,u,0,255)}}).sort(function(t,e){return t.brightness<e.brightness?-1:t.brightness>e.brightness?1:0})};var n=r(0);function o(t,e){for(var r=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fontFamily,r=void 0===e?"monospace":e,n=i(),o=n.canvas,u=n.ctx;return u.fillStyle="#fff",u.fillRect(0,0,o.width,o.height),u.fillStyle="#000",u.textBaseline="top",u.textAlign="left",u.font="20px "+r,u.fillText(t,0,0),o}(t,e),n=r.getContext("2d").getImageData(0,0,r.width,r.height),o=new Uint32Array(n.data.buffer),u=0,s=o.length,a=void 0;s--;)u+=((255&(a=o[s]))+(a>>8&255)+(a>>16&255))/3;return u/=r.width*r.height}var i=function(t){return t._result=null,function(){return t._result||(t._result=t())}}(function(){var t=document.createElement("canvas"),e=t.getContext("2d",{alpha:!1});return t.width=15,t.height=25,{canvas:t,ctx:e}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLRenderer=e.SIMPLE_CHARSET=e.ASCII_CHARSET=void 0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(2);Object.defineProperty(e,"ASCII_CHARSET",{enumerable:!0,get:function(){return o.ASCII_CHARSET}}),Object.defineProperty(e,"SIMPLE_CHARSET",{enumerable:!0,get:function(){return o.SIMPLE_CHARSET}}),e.default=function(t){var e=new u(t);return function(t){return e.render(t)}};var i=function(t){return t&&t.__esModule?t:{default:t}}(o);var u=e.HTMLRenderer=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Object.assign({},{tagName:"pre",fontSize:7,background:"#fff",color:"#000"},t)));return r.el=r.options.el||document.createElement(r.options.tagName),r.el.style.fontSize=r.options.fontSize+"px",r.el.style.fontFamily=r.options.fontFamily,r.el.style.backgroundColor=r.options.background,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),n(e,[{key:"render",value:function(t){return function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t),t.meta.colored||(this.el.style.color=this.options.color),(t.meta.colored?function(t){var e=s(function(t){var e=t.char,r=t.r,n=t.g,o=t.b;return'<span style="color: rgb('+r+", "+n+", "+o+')">'+e+"</span>"});return function(r){return t.innerHTML=e(r),t}}(this.el):function(t){var e=s(function(t){var e=t.char;return e});return function(r){return t.textContent=e(r),t}}(this.el))(t)}}]),e}();function s(t){return function(e){for(var r=e.width,n=e.data,o="",i=r,u=0,s=n.length;u<s;u++,i--)0===i&&(o+="\n",i=r),o+=t(n[u]);return o}}},function(t,e,r){"use strict";function n(t){return t.process(function(t,e){e.desaturate(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return function(t){return n(t)}},e.desaturate=n},function(t,e,r){"use strict";function n(t){return t.process(function(t,e){e.inverse(t).clamp(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return function(t){return n(t)}},e.inverse=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){return o(e,t)}},e.contrast=o;var n=r(3);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,n.linearTransformation)(t,e,0)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e){return o(e,t)}},e.brightness=o;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(3));function o(t,e){return(0,n.default)(1,e||0)(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=u(r(7)),i=u(r(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.idata=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"onRead",value:function(t){t.next(i.default.fromImageData(this.idata)),t.complete()}}],[{key:"fromImageData",value:function(t){return new e(t).read()}},{key:"fromCanvas",value:function(t,r,n,o,i){var u=t.getContext("2d").getImageData(r||0,n||0,o||t.width,i||t.height);return e.fromImageData(u)}}]),e}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=u(r(7)),i=u(r(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.video=t,o.options=Object.assign({},{autoplay:!1},n),o.video.autoplay=o.options.autoplay,o.captureFrame=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"onRead",value:function(t){var e=this,r=this.video;this.playbackLoop=function(){r.paused||r.ended||(t.next(i.default.fromImageData(e.captureFrame(r))),requestAnimationFrame(e.playbackLoop))},this.onError=function(){var n=r.src,o=r.error,i=o.code,u=o.message;r.removeEventListener("play",e.playbackLoop),t.error("Error occurred while trying to play "+n+": : "+i+", "+u)},r.addEventListener("error",this.onError),r.addEventListener("play",this.playbackLoop)}},{key:"onDispose",value:function(){this.video.removeEventListener("play",this.playbackLoop),this.video.removeEventListener("error",this.onError)}}],[{key:"fromVideoElement",value:function(t,r){return new e(t,function(){var t=document.createElement("canvas"),e=t.getContext("2d");return function(r){var n=r.videoWidth,o=r.videoHeight;return t.width=n,t.height=o,e.drawImage(r,0,0,n,o),e.getImageData(0,0,n,o)}}(),r).read()}}]),e}();e.default=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(4);e.tap=function(t,e,r){return function(n){return n.lift(new i(t,e,r))}};var i=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))},t}(),u=function(t){function e(e,r,n,i){t.call(this,e);var u=new o.Subscriber(r,n,i);u.syncErrorThrowable=!0,this.add(u),this.safeSubscriber=u}return n(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(24);e._do=function(t,e,r){return n.tap(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(6),o=r(25);n.Observable.prototype.do=o._do,n.Observable.prototype._do=o._do},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(4);e.map=function(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new i(t,e))}};var i=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.project,this.thisArg))},t}();e.MapOperator=i;var u=function(t){function e(e,r,n){t.call(this,e),this.project=r,this.count=0,this.thisArg=n||this}return n(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.Subscriber)},function(t,e,r){"use strict";var n=r(27);e.map=function(t,e){return n.map(t,e)(this)}},function(t,e,r){"use strict";var n=r(6),o=r(28);n.Observable.prototype.map=o.map},function(t,e,r){"use strict";e.noop=function(){}},function(t,e,r){"use strict";var n=r(30);function o(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return o(t)},e.pipeFromArray=o},function(t,e,r){"use strict";var n=r(5);function o(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=o,e.observable=o(n.root),e.$$observable=e.observable},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=function(t){function e(e){t.call(this),this.errors=e;var r=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return n(e,t),e}(Error);e.UnsubscriptionError=o},function(t,e,r){"use strict";var n,o=r(11);function i(){try{return n.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}e.tryCatch=function(t){return n=t,i}},function(t,e,r){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";var n=r(36),o=r(35),i=r(12),u=r(34),s=r(11),a=r(33),c=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,c=this._parents,l=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,d=c?c.length:0;r;)r.remove(this),r=++p<d&&c[p]||null;if(i.isFunction(l))u.tryCatch(l).call(this)===s.errorObject&&(e=!0,t=t||(s.errorObject.e instanceof a.UnsubscriptionError?f(s.errorObject.e.errors):[s.errorObject.e]));if(n.isArray(h))for(p=-1,d=h.length;++p<d;){var b=h[p];if(o.isObject(b))if(u.tryCatch(b.unsubscribe).call(b)===s.errorObject){e=!0,t=t||[];var y=s.errorObject.e;y instanceof a.UnsubscriptionError?t=t.concat(f(y.errors)):t.push(y)}}if(e)throw new a.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function f(t){return t.reduce(function(t,e){return t.concat(e instanceof a.UnsubscriptionError?e.errors:e)},[])}e.Subscription=c},function(t,e,r){"use strict";var n=r(4),o=r(9),i=r(10);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(i.empty)}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=u(r(7)),i=u(r(1));function u(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.url=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"onRead",value:function(t){var e=document.createElement("img");e.crossOrigin="Anonymous";var r=function(){o(),t.next(i.default.fromHTMLImageElement(e)),t.complete()},n=function(e){o(),t.error(e)},o=function(){e.removeEventListener("load",r),e.removeEventListener("error",n)};e.addEventListener("load",r),e.addEventListener("error",n),e.complete&&e.naturalWidth?r():this.url&&(e.src=this.url)}}],[{key:"fromURL",value:function(t){return new e(t).read()}},{key:"fromHTMLImage",value:function(t){return e.fromURL(t.src)}}]),e}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.charset=e.render=e.filter=e.read=e.aa=void 0;var n=b(r(40)),o=b(r(23)),i=b(r(22)),u=b(r(3)),s=b(r(21)),a=b(r(20)),c=b(r(19)),f=b(r(18)),l=b(r(17)),h=b(r(15)),p=r(2),d=b(r(14));function b(t){return t&&t.__esModule?t:{default:t}}e.aa=d.default;var y=e.read={image:{fromHTMLImage:n.default.fromHTMLImage,fromURL:n.default.fromURL},imageData:{fromImageData:i.default.fromImageData,fromCanvas:i.default.fromCanvas},video:{fromVideoElement:o.default.fromVideoElement}},v=e.filter={linear:u.default,brightness:s.default,contrast:a.default,inverse:c.default,desaturate:f.default},m=e.render={html:l.default,canvas:h.default},g=e.charset={SIMPLE_CHARSET:p.SIMPLE_CHARSET,ASCII_CHARSET:p.ASCII_CHARSET};e.default={aa:d.default,read:y,filter:v,render:m,charset:g}},function(t,e,r){var n,o,i;o=[t,e,r(41)],void 0===(i="function"==typeof(n=function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=class{constructor(t,e){this.imgSrc=t,this.imgWidth=0,this.imgHeight=0,this.asciiWidth=0,this.asciiHeight=0,this.asciified=null,e&&(this.option=e,this.asciified=this.init(this.option))}init(t){return new Promise((e,r)=>{this.loadImage().then(e=>{this.imgWidth=e.naturalWidth,this.imgHeight=e.naturalHeight;const r=this.getRatio(this.imgWidth,t),n=Math.round(this.imgWidth*r),o=Math.round(this.imgHeight/2*r);return e.remove(),this.createAsciiElement(n,o)}).then(t=>{console.log("inited"),this.asciified=t,e(t)}).catch(t=>r(t))})}ascii(){return new Promise((t,e)=>{Promise.resolve().then(()=>this.asciified||this.init(this.option)).then(()=>t(this.asciified))})}svg(){return new Promise((t,e)=>{Promise.resolve().then(()=>this.asciified||this.init(this.option)).then(e=>{const r=document.createElement("div");r.classList.add("workspace"),r.style.cssText="position: absolute; height: 1px; overflow: hidden; left: -999999px; bottom: -1px",e.style.cssText="display: inline-block",r.appendChild(e),document.body.appendChild(r),this.asciiWidth=e.clientWidth,this.asciiHeight=e.clientHeight;const n='<svg xmlns="http://www.w3.org/2000/svg" width="'+this.asciiWidth+'" height="'+this.asciiHeight+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">'+e.outerHTML+"</div></foreignObject></svg>";r.remove(),t("data:image/svg+xml,"+encodeURIComponent(n))}).catch(t=>e(t))})}loadImage(){return new Promise(t=>{const e=document.createElement("img");e.src=this.imgSrc,e.onload=(()=>t(e))})}getRatio(t,e){const r=Object.assign({ratio:null,targetWidth:60},e);let n=1;return r.ratio?n=r.ratio:r.targetWidth&&(n=(r.targetWidth/t).toFixed(2)),n}createAsciiElement(t,e){const r=document.createElement("pre");return new Promise(o=>n.default.read.image.fromURL(this.imgSrc).map(n.default.filter.contrast(1.2)).map(n.default.aa({fontSize:12,width:t,height:e,colored:!0})).map(n.default.filter.brightness(0)).map(n.default.render.html({el:r})).subscribe(t=>o(t)))}},t.exports=e.default})?n.apply(e,o):n)||(t.exports=i)},function(t,e,r){var n,o,i;o=[r(42)],void 0===(i="function"==typeof(n=function(t){"use strict";var e=function(t){return t&&t.__esModule?t:{default:t}}(t);window.asciify_aalib=e.default})?n.apply(e,o):n)||(t.exports=i)},function(t,e,r){t.exports=r(43)}]);